# 1. 프로세스

## 1.1. 개념
프로세스의 간단한 정의: 실행중인 프로그램

작업: 사용자가 컴퓨터에서 실행시키기 위하여 작성한 프로그램과 이 프로그램의 실행에 필요한 입력 데이터를 묶은 것. 작업은 프로그램과 이에 필요한 데이터를 의미하는 것. 

오늘날의 컴퓨터는 대부분 다중 프로그래밍 운영체제 형태를 갖는다. 이러한 상황에서 컴퓨터 사용자가 각각 자신의 작업을 프로세서가 처리하는 일의 단위인 프로세스로 나누어 작업을 시행하게 된다. 

프로세스: 커널에 등록되고 커널의 관리 하에 있는 작업을 의미. 커널에 등록된 프로세스는 자신이 실행해야 할 프로그램을 가지고 있음.이 프로그램을 실행하기 위해 커널에 각종 자원을 요청.

자원: 하드웨어 장치와 소프트웨어 요소

프로세스의 다른 정의: 프로세서를 할당받을 수 있는 개체. 그 외로 아래와 같은 정의가 가능

1. 실행중인 프로그램 또는 살아있는 프로그램
2. 언제든지 실행 가능한 프로그램
3. 프로세스 제어 블록을 가진 프로그램
4. CPU가 할당되는 단위

프로세스 제어 블록(PCB): 특정 프로세스에 대한 각종 정보를 갖고 있는 주기억장치 저장공간

프로세스는 능동적이지만 자원은 피동적이다.

## 1.2. 프로세스 종류

### 1.2.1. 운영체제 프로세스
운영체제 프로세스: 프로세스의 실행 순서를 제어하거나 사용한 프로세스가 다른 사용자 또는 운영체제 영역을 침범하지 못하도록 예방하는 등 감시 기능을 담당. 시스템 프로세스라고도 한다. 

### 1.2.2. 사용자 프로세스
사용자 프로그램 수행

### 1.2.3. 병행 프로세스
병행 프로세스: 여러 개의 프로세스들이 동시 수행상태일 경우를 의미. 동시에 시스템에 존재하지만 어느 순간 단 한 개의 프로세스만 프로세스에 실행

## 1.3. PCB(process control block)
시스템 내의 프로세스는 생성되어 종료될 때까지 여러 상태로 변환하는데, 운영체제는 이런 프로세스를 관리하고 제어하기 위해 프로세스의 위치와 상태정보를 항상 알고있어야 한다. 

프로세스는 사용자 프로그램, 데이터 및 시스템 호출 매개변수, 호출 주소를 저장할 스택, 운영체제가 프로세스를 제어하는데 필요한 PCB로 구성

### 1.3.1. 프로세스 식별자
프로세스 식별자: 커널이 시스템 내의 프로세스를 관리하는 데 있어 편의성을 위해 프로세스마다 다르게 부여하는 번호. 식별을 위한 정보로 다음이 있다.

1. 프로세스 식별자
2. 해당 프로세스를 사용하는 사용자 식별번호
3. 해당 프로세스의 부 프로세스와 자식 프로세스의 식별 번호

프로세스 픽별자는 일반적으로 유일한 숫자 번호를 갖는다. 

### 1.3.2. 프로세스 스케줄링 정보
프로세스의 우선순위, 스케줄링 큐에 대한 포인터, 다른 스케줄 매개 변수를 가지는 정보로서 특히 우선순위 기반 스케줄링을 하는 경우 필요한 정보.

### 1.3.3. 프로세스 상태 정보

### 1.3.4. 프로세스 제어를 위한 정보
프로세스가 현재 어떤 자원을 할당받고 있는지에 대해 항상 커널이 알 수 있도록 프로세스가 할당받은 자원에 대한 정보를 제어하는 영역.

1. 프로세스의 자료 구조 정보
2. 프로세스 간 각종 통신 정보
3. 프로세스의 각종 권한 정보
4. 주기억장치 관리 정보

# 2. 프로세스의 상태
프로세스의 상태는 활동 상태와 지연상태로 구분된다. 

* 활동 상태: 프로세스가 기억장치를 할당받은 상태
* 지연 상태: 그렇지 못한 상태

## 2.1. 상태 모델
하나의 CPU를 가진 다중 프로그래밍에서 주기억장치에 여러 개의 프로세스가 적재되어 있을 때라도 실행 상태의 프로세스는 오직 하나이며 다른 프로세스는 이 외의 상태를 갖는다. 

* 실행 상태: CPU를 할당받은 상태
* 비실행 상태: 그렇지 못한 상태

정의된 시간 할당 또는 우선순위 인터럽트에 의해 실행상태에서 벗어나거나 종료되면, 프로세스 스케줄링에 의해 대기중인 프로세스 중 하나의 프로세스가 선택되어 실행 상태가 된다. 

## 2.2. 프로세스 상태에서의 활동 상태
프로세스는 실행을 위해 기억장치를 할당받아 자신의 프로그램과 데이터 일부를 적재해야 한다. 

### 2.2.1. 활동 상태 세분화

#### 2.2.1.1. 생성 상태 
사용자가 요청한 작업이 커널에 등록되어 프로세스가 새롭게 생성된 상태. 만약 생성에 필요한 자원이 충분하지 않으면 지연 준비 상태로 전이

#### 2.2.1.2. 준비 상태
CPU 사용을 위한 실행 준비 상태. CPU 할당을 대기. 

#### 2.2.1.3. 실행 상태
CPU를 차지하여 수행하는 상태. 시간 할당이 끝나거나, 우선순위에 의해 반납될 수 있는데 이때를 선점되었다 한다.

#### 2.2.1.4. 대기 상태
실행 상태의 CPU가 IO 요구 등으로 CPU를 양보하고 요구한 입출력이 종료될 때까지 기다리는 상태

#### 2.2.1.5. 종료 상태 
CPU를 요구하지 않고 종료된 상태

### 2.2.2. 상태 전이

#### 2.2.2.1. 생성 상태에서 준비 상태로 이동
새로운 프로세스가 생성되어 생성 상태로 들어가면 시스템이 가질 수 있는 제한된 준비 프로세스의 수를 고려하여 준비 상태로 이동. 

#### 2.2.2.2. 준비 상태에서 실행 상태로 이동

#### 2.2.2.3. 실행 상태에서 준비 상태로 되돌리는 경우
인터럽트에 따라 CPU를 할당받아 실행준인 프로세스는 준비상태로 전이됨

#### 2.2.2.4. 실행 상태에서 대기 상태로 이동
CPU 규정 시간을 모두 사용하기 전, 입출력 요구나 다른 자원 요구를 하면 대기 상태로 전이

#### 2.2.2.5. 대기 상태에서 준비 상태로 인동

#### 2.2.2.6. 실행 상태에서 종료 상태로 이동

## 2.3. 프로세스 상태에서의 지연 상태
활동 상태에 있던 프로세스가 기억상태를 잃는 이유는 시스템 자원을 관리하는 커널이 기억장치 공간을 다른 목적으로 사용하기 위해 공간을 빼앗기 때문

지연 상태: 프로세스가 기억장치를 할당받지 못하는 상태. 지연 준비 상태와 지연 대기 상태로 구분

### 2.3.1. 프로세스 지연 원인
1. 운영체제 자신이 전체적 효율을 높이기 위해 충분한 주기억 공간 확보가 필요할 때 일부 프로세스를 보조기억장치로 교체하는 경우
2. 처리되는 프로세스가 어떤 문제에 직면하여 운영체제가 발견하여 프로세스를 해결할 때까지 연기하는 경우
3. 통신 선로 고장으로 작업이 진행될 필요가 없을 때 프로세스를 연기하는 경우
4. 대화식 처리를 하는 프로세스의 경우 정상 수행을 위한 프로그램의 수정이나 데이터 수정 작업이 끝날 때까지 프로세스를 연기하는 경우
5. 주기적으로 수행되어야 하는 프로세스의 경우, 해당 주기가 될 때까지 프로세스를 연기하는 경우

### 2.3.2. 지연 상태의 세분화

#### 2.3.2.1. 지연 준비 상태
프로세스가 생성된 후 기억장치 양이 부족하거나, 이미 기억장치를 할당받고 준비상태에 있던 프로세스가 기억장치를 빼앗기는 경우 지연 준비 상태에 도달. 준비 상태에서 지연 준비 상태로 전이되는 것을 지연이라 한다. 

#### 2.3.2.2. 지연 대기 상태
어떤 자원을 얻고자 대기 상태에 있던 프로세스도 커널에 의하여 기억장치를 빼앗길 수 있는데, 대기 상태에서 기억장치를 잃은 프로세스는 지연 대기 상태로 전이된다. 

# 3. 스레드

## 3.1. 도입 배경
프로세스를 고속으로 조작하기 위해 경량 프로세스의 개념이 도입되었음. 

프로세스의 무게: 프로세스가 포함하거나 참조하는 자원의 논리적 총량. 

프로세스에 대한 기본 조작은 다음과 같다.
1. 프로세스의 교체
2. 문맥의 변경
3. 프로세스 간 동기 및 통신 
4. 프로세스의 생성, 수행, 소멸

문맥: 프로세스가 포함하거나 참조하는 자원에 의해 정의되는 실행 환경. 경량 프로세스 또는 스레드라고 한다. 

## 3.2. 개념
스레드는 프로세스보다 더 작은 CPU 실행 단위를 말한다. 다중 프로그래밍을 지원하는 시스템 하에서 CPU에게 보내져 실행되는 단위. 

스레드의 목적: 프로세스의 상대적인 무게를 경감시켜 효율을 올린다. 

스레드의 목적 요약

1. 제어의 흐름을 의미. 실행의 단위
2. 독립적인 프로그램 카운터를 가진다. 
3. 한 프로세스 내부에서 스케줄이 가능한 개체

## 3.3. 종류
### 3.3.1. 사용자 수준 스레드
커널의 갱신 없이 다양한 목적의 응용 프로그램이나 언어 인터페이스들의 요구에 쉽게 적용될 수 있는 장점을 가지지만 커널의 효율적 서비스를 지원받지 못한다. 

### 3.3.2. 커널 수준 스레드
커널의 직접적인 자원으로 실행되어 사용자 수준 스레드가 겪는 커널 지원 부족의 문제가 극복 가능하다. 그러나 문맥교환 비용, 프로그램상 오류, 악성 프로그램부터 자신의 영역을 보호하기 위한 검사에 많은 비용을 낭비한다. 

### 3.3.3. 다중 스레드
#### 3.3.3.1. 도입 배경
커널 지원 스레드 문제 해결을 위해, 다수 개의 스레드를 이용하여 하나의 프로그램을 동시에 수행한다. 

#### 3.3.3.2. 특징
1. 하드웨어의 병렬성으로 인해 성능 향상
2. 응용 프로그램 처리율 상승
3. 응용 프로그램 응답성 증가
4. 프로세스간 통신 향상
5. 시스템 자원의 이용성 개선
6. 분산 객체의 고유한 스레드 성질 이용 가능
7. 잘 구조화된 프로그램 생성 가능

# 4. 프로세스 스케줄링

## 4.1. 개념
스케줄링: 특정 자원에 대해 그 자원을 요청하는 대상 중 누구에게 먼저 자원을 할당할지 결정하는 일

프로세스 스케줄러는 미리 정해진 시간 양을 다 쓰고 나면 실행중인 프로세스에게 주기적 인터럽트를 건다. 

장기 스케줄링에서는 FIFO방식을 이용하는 경우가 많지만, 프로세스의 중요도에 따라 복잡한 방법을 쓰기도 한다. 

중기 스케줄링에서는 주기억장치를 할당받지 못하고 있는 프로세스에 대해 어느 프로세스에게 먼저 주기억장치를 할당할지 결정한다. 

단기 스케줄링에서는 준비 상태에 있는 프로세스를 대상으로 어느 프로세스에게 프로세서를 할당할지 결정한다. 이 단계를 프로세스 스케줄링이라고 한다. 

## 4.2. 목적

### 4.2.1. 시스템 측면의 목적
1. 처리능력의 극대화를 위해 CPU의 효율이 최대화되어야 한다. 
2. 모든 프로세스에 대한 공평성이 유지되어야 한다. 